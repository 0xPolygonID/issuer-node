global:
  vaultpwd: pepe
  uidomain: ui.issuernode.polygonid.me
  apidomain: api.issuernode.polygonid.me

issuernode_repository_image: privadoid/issuernode-api
issuernode_repository_tag: latest
issuernode_ui_repository_image: privadoid/issuernode-ui
issuernode_ui_repository_tag: latest
uiPassword: password
issuerUiInsecure: false
issuerName: "My Issuer!"
ingressEnabled: true
privateKey:
namespace: issuer-node
issuerResolverFile: ""


apiIssuerNode:
  deployment:
    replicaCount: 1
    name: api-issuer-node
    env:
      issuerDatabaseUrl: postgres://$(ISSUER_DB_USER):$(ISSUER_DB_PASSWORD)@postgres-issuer-node-svc:$(ISSUER_DB_PORT)/$(ISSUER_DB_NAME)?sslmode=disable
      issuerKeyStoreAddress: http://vault-issuer-node-svc:$(ISSUER_KEY_STORE_PORT)
    imagePullPolicy: Always
    labels:
      app: api-issuer-node-deployment
    livenessProbe:
      name: Custom-Header
      value: Awesome
      path: /status
      port: 3001
      initialDelaySeconds: 3
      periodSeconds: 60 
    apiconfigMapRef: issuer-node-api-configmap
    args: 
      - '"./migrate; ./platform"'
    command:  
      - '"sh", "-c"'
    containerPort: 3001
    containerName: api

  service:
    name: api-issuer-node-svc
    ports:
    - port: 3001
      protocol: TCP
      targetPort: 3001
    type: ClusterIP
    nodePort: 30001
    selector: api-issuer-node
    labels:
      app: issuer-node

  configMap:
    issuerApiAuthPassword: password-issuer
    issuerApiAuthUser: user-issuer
    issuerCircuitPath: ./pkg/credentials/circuits
    issuerDbName: platformid
    issuerDbPassword: strongpasswordapp
    issuerDbPort: "5432"
    issuerDbUser: polygonid
    issuerKMSBJJProvider: vault
    issuerKMSETHProvider: vault
    issuerKeyStorePluginIden3MountPath: iden3
    issuerKeyStorePort: "8200"
    issuerLogLevel: "-4"
    issuerLogMode: "2"
    issuerNativeProofGenerationEnabled: "true"
    issuerOnchainCheckStatusFrequency: 1m
    issuerOnchainPublishStateFrequency: 1m
    issuerPublishKeyPath: pbkey
    issuerRedisUrl: redis://@redis-issuer-node-svc:6379/1
    issuerReverseHashServiceEnabled: "false"
    issuerServerPort: "3001"
    issuerName: issuer-node-api-configmap
    issuerVaultUserpassAuthEnabled: "true"
    issuerCredentialStatusPublishingKeyPath: pbkey
    issuerIpfsGatewayUrl: https://gateway.pinata.cloud
    issuerKMSProviderLocalStorageFilePath: /localstoragekeys
    issuerPaymentsSettingsFile: "ODAwMDI6CiAgUGF5bWVudFJhaWxzOiAweEY4RTQ5YjkyMkQ1RmIwMGQzRWREMTJiZDE0MDY0ZjI3NTcyNkQzMzkKICBQYXltZW50T3B0aW9uczoKICAgIC0gSUQ6IDEKICAgICAgTmFtZTogQW1veU5hdGl2ZQogICAgICBUeXBlOiBJZGVuM1BheW1lbnRSYWlsc1JlcXVlc3RWMQogICAgLSBJRDogMgogICAgICBOYW1lOiBBbW95IFVTRFQKICAgICAgVHlwZTogSWRlbjNQYXltZW50UmFpbHNFUkMyMFJlcXVlc3RWMQogICAgICBDb250cmFjdEFkZHJlc3M6IDB4NzFkY2M4RGM1RWIxMzgwMDNkMzU3MTI1NTQ1OEJjNTY5MmE2MGVENAogICAgICBGZWF0dXJlczogW10KICAgIC0gSUQ6IDMKICAgICAgTmFtZTogQW1veSBVU0RDCiAgICAgIFR5cGU6IElkZW4zUGF5bWVudFJhaWxzRVJDMjBSZXF1ZXN0VjEKICAgICAgQ29udHJhY3RBZGRyZXNzOiAweDcxZGNjOERjNUViMTM4MDAzZDM1NzEyNTU0NThCYzU2OTJhNjBlRDQKICAgICAgRmVhdHVyZXM6CiAgICAgICAgLSBFSVAtMjYxMgo1OTE0MToKICBQYXltZW50UmFpbHM6IDB4NDBFM0VGMjIxQUE5M0Y2RmU5OTdjOWIwMzkzMzIyODIzQmIyMDdkMwogIFBheW1lbnRPcHRpb25zOgogICAgLSBJRDogNAogICAgICBOYW1lOiBMaW5lYVNlcG9saWFOYXRpdmUKICAgICAgVHlwZTogSWRlbjNQYXltZW50UmFpbHNSZXF1ZXN0VjEKICAgIC0gSUQ6IDUKICAgICAgTmFtZTogTGluZWEgU2Vwb2xpYSBVU0RUCiAgICAgIFR5cGU6IElkZW4zUGF5bWVudFJhaWxzRVJDMjBSZXF1ZXN0VjEKICAgICAgQ29udHJhY3RBZGRyZXNzOiAweGIwMTAxYzFGZmRkMTIxM0I4ODZGZWJlRjZGMDc0NDJlNDg5OTBjOUMKICAgICAgRmVhdHVyZXM6IFtdCiAgICAtIElEOiA2CiAgICAgIE5hbWU6IExpbmVhIFNlcG9saWEgVVNEQwogICAgICBUeXBlOiBJZGVuM1BheW1lbnRSYWlsc0VSQzIwUmVxdWVzdFYxCiAgICAgIENvbnRyYWN0QWRkcmVzczogMHhiMDEwMWMxRmZkZDEyMTNCODg2RmViZUY2RjA3NDQyZTQ4OTkwYzlDCiAgICAgIEZlYXR1cmVzOgogICAgICAgIC0gRUlQLTI2MTIKMjQ0MjoKICBQYXltZW50UmFpbHM6IDB4MDljMjY5ZTc0ZDhCNDdjOTg1MzdBY2Q2Q2JFZTgwNTY4MDZGNGM3MAogIFBheW1lbnRPcHRpb25zOgogICAgLSBJRDogNwogICAgICBOYW1lOiBaa0V2bU5hdGl2ZQogICAgICBUeXBlOiBJZGVuM1BheW1lbnRSYWlsc1JlcXVlc3RWMQogICAgLSBJRDogOAogICAgICBOYW1lOiBaa0V2bSBVU0RUCiAgICAgIFR5cGU6IElkZW4zUGF5bWVudFJhaWxzRVJDMjBSZXF1ZXN0VjEKICAgICAgQ3VycmVuY3k6IFVTRFQKICAgICAgQ29udHJhY3RBZGRyZXNzOiAweDk4NmNhRTZBRGNGNWRhMmExNTE0YWZjNzMxN0ZCZGVFMEI0MDQ4RGIKICAgICAgRmVhdHVyZXM6IFtdCiAgICAtIElEOiA5CiAgICAgIE5hbWU6IFprRXZtIFVTREMKICAgICAgVHlwZTogSWRlbjNQYXltZW50UmFpbHNFUkMyMFJlcXVlc3RWMQogICAgICBDb250cmFjdEFkZHJlc3M6IDB4OTg2Y2FFNkFEY0Y1ZGEyYTE1MTRhZmM3MzE3RkJkZUUwQjQwNDhEYgogICAgICBGZWF0dXJlczoKICAgICAgICAtIEVJUC0yNjEy"
  
notificationsIssuerNode:
  deployment:
    replicaCount: 1
    name: notifications-issuer-node
    env:
      issuerDatabaseUrl: postgres://$(ISSUER_DB_USER):$(ISSUER_DB_PASSWORD)@postgres-issuer-node-svc:$(ISSUER_DB_PORT)/$(ISSUER_DB_NAME)?sslmode=disable
      issuerKeyStoreAddress: http://vault-issuer-node-svc:$(ISSUER_KEY_STORE_PORT)
    imagePullPolicy: IfNotPresent
    labels: 
      app: notifications-issuer-node-deployment
    containerName: notifications
    args: 
      - '"./notifications"'
    command:  
      - '"sh", "-c"'

pendingPublisherIssuerNode:
  deployment:
    replicaCount: 1
    name: pending-publisher-issuer-node
    env:
      issuerDatabaseUrl: postgres://$(ISSUER_DB_USER):$(ISSUER_DB_PASSWORD)@postgres-issuer-node-svc:$(ISSUER_DB_PORT)/$(ISSUER_DB_NAME)?sslmode=disable
      issuerKeyStoreAddress: http://vault-issuer-node-svc:$(ISSUER_KEY_STORE_PORT)
    imagePullPolicy: Always
    labels: 
      app: pending-publisher-issuer-node-deployment
    containerName: pending-publisher
    args: 
      - '"./pending_publisher"'
    command:  
      - '"sh", "-c"'

uiIssuerNode:
  deployment:
    replicaCount: 1
    name: ui-issuer-node
    imagePullPolicy: Always
    uiconfigMapRef: issuer-node-ui-configmap
    containerName: ui
    containerPort: 80
    labels: 
      app: ui-issuer-node-deployment
  service:
    name: ui-issuer-node-svc
    ports:
    - port: 8080
      protocol: TCP
      targetPort: 80
    type: ClusterIP
    nodePort: 30003
    selector: ui-issuer-node
  configMap:
    issuerApiAuthUser: user-issuer
    issuerApiAuthPassword: password-issuer
    issuerApiUiIssuerName: my issuer k8s
    issuerUiAuthUsername: user-ui
    issuerUiIpfsGatewayUrl: https://ipfs.io
    issuerApiUiName: issuer-node-ui-configmap
    issuerUiSchemaExplorerAndBuilderUrl: https://tools.privado.id

secrets:
  name: private-key-secret
  type: Opaque



